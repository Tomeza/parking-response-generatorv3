import { PrismaClient } from '@prisma/client';
import { fileURLToPath } from 'url';

const prisma = new PrismaClient();

// 複雑度3のサンプルFAQデータ
const complexFaqs = [
  {
    question: "法人契約の月極駐車場で契約者名義変更と複数台契約の台数変更を同時に行いたい場合、手続きはどうなりますか？",
    answer: `法人契約の月極駐車場で「契約者名義の変更」と「台数変更（増減）」を同時に希望される場合は、以下の手順・条件が適用されます。

1. 名義変更手続き
   * 代表者印の押印された「名義変更届」をご提出ください。
   * 必要書類：新旧契約法人の登記簿謄本、担当者の身分証明書。
   * 新契約者に与信審査を実施します。

2. 台数変更手続き
   * 追加の場合：空き状況確認後、台数分の保証金を再計算しご案内します。
   * 減車の場合：月途中での減車は翌月から適用。
   * 増減両方の場合、申請書を一括でご提出ください。

3. 例外対応
   * 名義・台数いずれかで審査不承認の場合、全手続きが無効になる場合があります。
   * 複数拠点契約の場合、拠点ごとに申請・審査が必要です。

※ご不明点は事前にカスタマーサポートまでご相談ください。`,
    category: "契約/法人"
  },
  {
    question: "予約当日、天候悪化による警報発令とシステム障害が同時に発生した場合、キャンセル・返金や代替案内はどうなりますか？",
    answer: `予約当日に「気象警報」と「システム障害」が同時発生した場合の対応は以下の通りです。

1. キャンセル・返金
   * 警報発令によるキャンセル：無条件で全額返金
   * システム障害による利用不可：無条件で全額返金
   * 上記の両方が重なった場合も全額返金

2. 代替案内
   * 近隣の空き駐車場へ案内（ただし警報発令中は案内不可の場合あり）
   * 代替駐車場が満車、または利用困難な場合は一時待機または予約自体をキャンセル

3. 連絡方法
   * 自動メール＋電話で状況をご案内
   * 連絡がつかない場合は、公式Webサイトの「緊急対応ページ」もご確認ください

※複数要因による影響時は、どちらか一方でも無条件返金対象となります。`,
    category: "トラブル/緊急"
  },
  {
    question: "時間貸しから月極に切り替えた後、契約者が途中で車両を変更したい場合、手続きや料金、保証金はどうなりますか？",
    answer: `月極切り替え後の車両変更は、以下の対応が必要です。

1. 事前申請
   * マイページまたは窓口で「車両変更申請書」を提出
   * 新車両の車検証・身分証明書を添付

2. 審査・条件
   * 車両サイズが契約区画の制限内か確認
   * 法人契約の場合は、追加書類が必要

3. 料金・保証金
   * 車両サイズ増加：保証金の追加支払いが発生
   * サイズ減少の場合、保証金は据え置き・返金なし
   * 変更が月途中の場合、当月分は旧車両で請求・翌月から新車両で請求
   * 月極契約内容により追加事務手数料が発生する場合あり

※変更希望が複数回続く場合、再審査・追加手数料となります。`,
    category: "契約/変更"
  },
  {
    question: "クレジットカードの有効期限切れと同時に、予約利用者名の変更申請があった場合の支払い・本人確認・領収書発行はどうなりますか？",
    answer: `以下の順序で対応します。

1. クレジットカード有効期限切れ対応
   * 期限切れカードは自動決済不可→新カード情報の再登録要請
   * 期限内に更新されない場合は予約自動キャンセル

2. 利用者名変更
   * 新旧利用者双方の本人確認（公的書類提出）
   * 名義変更が間に合わない場合、旧名義での利用となり領収書も旧名義で発行
   * 支払情報と利用者名が一致しない場合、決済自体が一時保留

3. 領収書発行
   * 支払い・本人確認の両方が正しく完了した場合のみ新名義で領収書発行
   * いずれかに不備がある場合、領収書は一時発行保留

※複数の手続きが同時進行となるため、ご連絡・ご協力をお願いいたします。`,
    category: "支払い/名義変更"
  },
  {
    question: "送迎予約時、利用者が5名を超え（うち1名は幼児）、出発時刻直前に利用車種の変更申請と、利用エリアが空港から港に変更された場合、送迎対応はどうなりますか？",
    answer: `1. 定員超過
   * 幼児も1名としてカウントし、最大定員5名を超える場合は車両の追加手配が必要
   * 追加車両が手配できない場合、送迎をお断りする場合あり

2. 車種変更申請
   * 利用直前（2時間前以内）の車種変更は原則受付不可
   * 特例対応の場合、空き状況と安全確認後に判断

3. エリア変更（空港→港）
   * 送迎エリアが変わる場合、事前に再予約が必要
   * 出発時刻直前のエリア変更はスタッフ対応の可否で変動

4. 総合判断
   * 全要件を満たさない場合、部分的にキャンセル／一部のみ対応（例：人数減の場合は一台対応）

※緊急時や直前の変更は原則不可。どうしても対応が必要な場合は電話でご相談ください。`,
    category: "送迎/変更"
  }
];

async function addComplexFaqs() {
  try {
    console.log('Adding complex FAQ samples...');

    // 複雑なFAQデータの追加
    for (const faq of complexFaqs) {
      await prisma.faqRaw.create({
        data: {
          question: faq.question,
          answer: faq.answer,
          category: faq.category
        }
      });
    }

    console.log(`Added ${complexFaqs.length} complex FAQ entries`);

    // 作成されたデータの確認
    const createdFaqs = await prisma.faqRaw.findMany({
      where: {
        id: {
          gt: 20 // 既存のFAQのIDが20までなので
        }
      },
      orderBy: { id: 'asc' }
    });

    console.log('\nCreated complex FAQ entries:');
    createdFaqs.forEach(faq => {
      console.log(`\nID: ${faq.id}`);
      console.log(`Category: ${faq.category}`);
      console.log(`Question: ${faq.question}`);
    });

  } catch (error) {
    console.error('Error adding complex FAQs:', error);
    throw error;
  } finally {
    await prisma.$disconnect();
  }
}

// スクリプトが直接実行された場合のみ実行
if (process.argv[1] === fileURLToPath(import.meta.url)) {
  addComplexFaqs()
    .catch(console.error);
}

export { addComplexFaqs }; 